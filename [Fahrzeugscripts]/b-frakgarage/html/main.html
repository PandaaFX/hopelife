<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Niggabob</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
    <link rel="stylesheet" type="text/css" rel="noopener" target="_blank" href="index.css">
</head>

<body>
    <div class="ui">
        <!-- <div class="bg"></div> -->
        <div class="bgeffect"></div>
        <div class="strich"></div>
        <div class="titleMain">GARAGE</div>
        <div class="descMain">Select what you have to do with your car</div>
        <div class="rightLine">
            <div class="title">BUY A NEW CAR</div>
            <div class="desc">Your car will be parked on your parked place, that’s easy!</div>
        </div>
        <div class="leftLine">
            <div class="title">PARK MY CAR</div>
            <div class="desc">Your car will be parked on your parked place, that’s easy!</div>
        </div>
        <div class="selectedRight" style="display: block"></div>
        <div class="selectedLeft" style="display: none"></div>
        <div class="leftSide" onmouseover="selectLeftSide()" onclick="showGarageUI()"></div>
        <div class="rightSide" onmouseover="selectRightSide()" onclick="showShopUI()"></div>
    </div>
    <!---GARAGE-->
    <div class="ui2">
        <!-- <div class="bg"></div> -->
        <div class="bgeffect"></div>
        <div class="strich"></div>
        <div class="titleMain">GARAGE</div>
        <div class="descMain">Select what you have to do with your car</div>
        <div class="carContent">

        </div>
    </div>
    <!---SHOP-->
    <div class="ui3">
        <!-- <div class="bg"></div> -->
        <div class="bgeffect"></div>
        <div class="shopIcon"></div>
        <div class="shopTitle" style="width: 900px">BLOODS</div>
        <div class="shopTitle" style="top: 8.5%; width: 900px">FRAKTIONSSHOP</div>
        <div class="shopDesc" style="width: 500px">Hier kannst du ein Fraktionssauto erwerben!</div>
        <div class="buybtn">
            <div class="text">Auto Kaufen</div>
        </div>
        <div class="testbtn">
            <div class="text">Test-Fahrt</div>
        </div>
        <div class="buyText">Preis: </div>
        <div class="price">$756.60  </div>
        <div class="shopContent">

        </div>
    </div>
</body>

<style>

</style>


<!-------------------------------------------------------------------------------------->
<script>

        
    $(document).keyup(function(event) {
        if (event.key === 'Escape') {
            $.post('https://b-frakgarage/data', JSON.stringify({ close: true }));
            $('.ui').hide();
            $('.ui2').hide();
            $('.ui3').hide();
        }
    });

    var cashFormat = new Intl.NumberFormat('en-US', {
        style: 'currency',
        currency: 'USD',
    });

    window.addEventListener('message', function(event) {
        if (event.data.type == "show") {
            $('.ui').show();
        } else if (event.data.type == "addShopCar") {
            addShopCar(event.data.model, event.data.price)
        }
    });

    $('.ui').hide();
    $('.ui2').hide();
    $('.ui3').hide();

    function addShopCar(carName, carPrice) {
        $('.shopContent').append(`
        <div class="carFrame" onclick="selectCar()">
                <div class="carIcon"></div>
                <span class="carName">`+ carName +`</span>
                <div class="carPrice">`+ cashFormat.format(carPrice) + `</div>
        </div>
        `)
    }

    function selectCar() {
        $('.carInfo').show();
        $(".carInfo").css("left", x + "px")
        $(".carInfo").css("top", y + "px")
    }

    function addgaragecar(carName, carId) {
        $('.carContent').append(`
            <div class="carFrame">
                <div class="carIcon"></div>
                <div class="carName">`+ carName +`</div>
                <div class="parkOut">
                    <div class="text">Park Out</div>
                </div>
            </div>
        `)
    }
    
    function showGarageUI() {
        $('.ui').hide();
        $('.ui2').show();
        $('.ui3').hide();

    }

    function showShopUI() {
        $('.ui').hide();
        $('.ui2').hide();
        $('.ui3').show();
        $.post('https://b-frakgarage/data', JSON.stringify({
            startcam: true,
            loadshopcars: true
        }));
    }


    function selectLeftSide() {
        $('.selectedRight').hide();
        $('.selectedLeft').show();
    }
    function selectRightSide() {
        $('.selectedLeft').hide();
        $('.selectedRight').show();
    }

</script>
</html>